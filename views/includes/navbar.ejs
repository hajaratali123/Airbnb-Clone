<style>
.search-btn{
background-color: #fe424d;
color: aliceblue;
border-radius: 25px;
padding:0 1rem 0 1rem ;
}
.search-btn:hover{
background-color: #fe424d;
color: aliceblue;
}
.search-btn i{
  display: inline;
  margin-right:0.5rem;
}
.search-input{
  border-radius: 25px;
  padding: 0.5rem 3rem 0.5rm 3rem;
  font-size: 0.5rem;
}
#user-profile {
    position: relative;
}

.profile-link {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #fff;
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 5px;
}

#user-profile:hover .profile-link {
    display: inline-block;
    text-decoration: none;
}



</style>
<nav class="navbar navbar-expand-md bg-body-light border-bottom sticky-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="/"><i class="fa-solid fa-compass"></i></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav" class="name">
          <a class="nav-link" href="/listings">Explore</a>

          <div id="user-profile" class="d-flex align-items-center">
            <% if(locals.currentUser) { %>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            
            <span class="username"><%= currentUser.username %></span>
            <a href="/userprofile" class="profile-link">View Profile</a>
            <% } %>
        </div>
        

      
         
          
    </div>
  
    <div class="nav-search nav-hover nav-search-search ms-auto">
      <form
        class="d-flex needs-validation"
        role="search"
        action="/listings/search"
        method="get"
        id="searchBox"
      >
        <input
          class="form-control me-2 search-inp"
          type="search"
          placeholder="Search Destiny"
          aria-label="Search"
          name="q"
          id="mySearchInput"
        />
        <button class="btn search-btn" type="submit" id="search">
          <i class="fa-solid fa-magnifying-glass"></i>Search
        </button>
      </form>
    </div>
    <div class="navbar-nav ms-auto" id="navbarNav">
          <a class="nav-link" href="/listings/new">Airbnb your home  </a>
      <% if(!currentUser) {%>
        <a class="nav-link active" aria-current="page" href="/signup">
          <b>signup</b>
          </a>
        <a class="nav-link" href="/login">
          <b>login</b>
          
          </a>
        <% } %>
        <% if (currentUser) { %>
          <a href="/user/profile" class="nav-link">Profile</a>
      <% } %>

      <% if(currentUser) {%>
          <a class="nav-link" href="/logout">
            <b>Log out</b></a>
          <% } %>




      </div>
      
      </div>


</div>

    

    </div>
  </div>
</nav>

<script>
  function searchByCategory(event) {
    event.preventDefault();
    
    // Get the selected category from the dropdown
    const selectedCategory = document.getElementById('categorySelect').value;

    // Get the search input value
    const searchInput = document.getElementById('searchInput').value;

    // Perform the search with the selected category and search input
    // You can replace this with your actual search implementation
    const searchUrl = `/search?category=${selectedCategory}&query=${encodeURIComponent(searchInput)}`;
    
    // Redirect to the search results page
    window.location.href = searchUrl;
  }
</script>
